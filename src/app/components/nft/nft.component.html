<div class="center-div">
  <div class="card main">
    <div class="center-img">
      <br />
      <img
        src="../../../assets/bi_coin.gif"
        alt="unfold"
        height="33%"
        width="33%"
        style="border-radius: 50%"
      />
    </div>

    <div *ngIf="!this.isLoading">
      <p>
        <u>Manage {{ contractName }} ({{ contractSymbol }}) NFT's!</u>
      </p>
      <p style="font-size: 1.25em">
        {{ contractSymbol }} Address: {{ contractAddress }}
        <br />
        BINU20 tokens: {{ tokensOwned }}
      </p>
      <div *ngIf="this.userAddress == ''">
        <p style="color: red">
          MetaMask Not Connected. Please connect to BSC test net
        </p>
      </div>
      <div *ngIf="this.error">
        <p style="color: red">Found Error : {{ error }}</p>
      </div>

      <div *ngIf="this.userAddress != ''">
        <img
          src="../../assets/example.gif"
          alt="logo"
          width="10%"
          style="border-radius: 50%"
        /><br /><br />

        <div class="row" style="margin-left: auto; margin-right: auto">
          <div class="center-div">
            <div class="col-xl-4">
              <div class="card-body" id="manageCard">
                <p class="card-text" style="font-size: 1em">
                  MINT with BNB <br />
                  Price : {{ contractPrice }} BnB
                </p>
                <div
                  class="form-outline"
                  id="mintInput"
                  style="max-width: 75%; margin-left: auto; margin-right: auto"
                >
                  <input
                    [ngModel]="numToBuy"
                    (ngModelChange)="setMintAmount($event)"
                    type="number"
                    min="0"
                    max="100000000000"
                    step="1"
                    onfocus="this.previousValue = this.value"
                    onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                    class="form-control"
                    placeholder="Amount"
                  />
                </div>
                <br />
                <p>Buy {{ numToBuy }} for {{ totalPrice }}</p>
                <button class="favorite styled" type="button" (click)="mint()">
                  Mint!
                </button>
              </div>
            </div>
            <div class="col-xl-4">
              <div class="card-body" id="manageCard">
                <p class="card-text" style="font-size: 1em">
                  MINT with {{ contractSymbol }}<br />
                  Cost : {{ contractPriceInUtilityToken }}
                  {{ erc20ContractSymbol }}
                </p>
                <div
                  class="form-outline"
                  id="mintInput"
                  style="max-width: 75%; margin-left: auto; margin-right: auto"
                >
                  <input
                    [ngModel]="numToBuyWithToken"
                    (ngModelChange)="setMintAmountWithToken($event)"
                    type="number"
                    min="0"
                    max="100000000000"
                    step="1"
                    onfocus="this.previousValue = this.value"
                    onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                    class="form-control"
                    placeholder="Amount"
                  />
                </div>
                <br />
                <p>
                  Buy {{ numToBuyWithToken }} for {{ totalPriceWithToken }}
                  {{ erc20ContractSymbol }}
                </p>
                <button
                  class="favorite styled"
                  type="button"
                  (click)="mintWithUtilityToken()"
                >
                  Mint!
                </button>
              </div>
            </div>
          </div>
        </div>

        <br />

        <div class="row" style="margin-left: auto; margin-right: auto">
          <p>
            <u> UNSTAKED NFT's ({{ userNFTs.length }}) </u>
          </p>

          <div class="row" style="margin-left: auto; margin-right: auto">
            <div class="col-xl-4" *ngFor="let obj of unstakedNfts | keyvalue">
              <div class="card-body" id="manageCard">
                <p class="card-text" style="font-size: 1em">
                  {{ obj.value.name }}<br />
                  <img
                    src="{{ obj.value.image }}"
                    alt="logo"
                    width="35%"
                    style="border-radius: 50%"
                  />
                  <br />
                </p>

                <div *ngFor="let t of obj.value.attributes">
                  <p>{{ t.trait_type }} &nbsp;{{ t.value }}</p>
                </div>
                <div class="center-div">
                  <button
                    class="favorite styled"
                    type="button"
                    (click)="stake(obj.value.id)"
                  >
                    Stake
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row" style="margin-left: auto; margin-right: auto">
          <p>
            <u> STAKED NFT'S ({{ userStakedNFTs.length }})</u>
          </p>
          <button
            class="favorite styled"
            style="margin-left: auto; margin-right: auto"
            type="button"
            (click)="collectAllStakedNftReward()"
          >
            Claim ALL
          </button>
          <div class="row">
            <div class="col-md-4" *ngFor="let obj of stakedNfts | keyvalue">
              <div class="card-body" id="manageCard">
                <p class="card-text" style="font-size: 1em">
                  {{ obj.value.name }}<br />
                  <img
                    src="{{ obj.value.image }}"
                    alt="logo"
                    width="35%"
                    style="border-radius: 50%"
                  />
                  <br />
                </p>

                <div *ngFor="let t of obj.value.attributes">
                  <p>{{ t.trait_type }} &nbsp;{{ t.value }}</p>
                </div>

                <div class="center-div">
                  <button
                    class="favorite styled"
                    type="button"
                    (click)="unstake(obj.value.id)"
                  >
                    Unstake
                  </button>
                </div>
                <div class="center-div">
                  <button
                    class="favorite styled"
                    type="button"
                    (click)="collectStakedNftReward(obj.value.id)"
                  >
                    Claim {{ obj.value.potentialReward }} {{ contractSymbol }}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="this.isLoading">
      <br />
      <div
        class="spinner-grow"
        style="width: 10em; height: 10em; color: #f0b90b"
        role="status"
      >
        <span class="visually-hidden">Loading...</span>
      </div>
      <br />
      <br />
      <br />

      <p style="font-size: 1.25em; color: #f0b90b">Loading...</p>
      <br />
    </div>
  </div>
</div>
